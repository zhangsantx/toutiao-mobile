(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c9ba445e"],{"05ba":function(t,e,n){},"20a0":function(t,e,n){"use strict";n("a09a")},2423:function(t,e,n){"use strict";n.d(e,"f",(function(){return r})),n.d(e,"e",(function(){return i})),n.d(e,"a",(function(){return c})),n.d(e,"c",(function(){return s})),n.d(e,"b",(function(){return o})),n.d(e,"d",(function(){return l}));var a=n("b775"),r=function(t){return Object(a["a"])({method:"GET",url:"/app/v1_1/articles",params:t})},i=function(t){return Object(a["a"])({method:"GET",url:"/app/v1_0/articles/".concat(t)})},c=function(t){return Object(a["a"])({method:"POST",url:"/app/v1_0/article/collections",data:{target:t}})},s=function(t){return Object(a["a"])({method:"DElETE",url:"/app/v1_0/article/collections/".concat(t)})},o=function(t){return Object(a["a"])({method:"POST",url:"/app/v1_0/article/likings",data:{target:t}})},l=function(t){return Object(a["a"])({method:"DElETE",url:"/app/v1_0/article/collections/".concat(t)})}},"3c79":function(t,e,n){"use strict";n("597a")},"408a":function(t,e,n){var a=n("e330");t.exports=a(1..valueOf)},4822:function(t,e,n){"use strict";n("e72d")},5899:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(t,e,n){var a=n("e330"),r=n("1d80"),i=n("577e"),c=n("5899"),s=a("".replace),o="["+c+"]",l=RegExp("^"+o+o+"*"),u=RegExp(o+o+"*$"),d=function(t){return function(e){var n=i(r(e));return 1&t&&(n=s(n,l,"")),2&t&&(n=s(n,u,"")),n}};t.exports={start:d(1),end:d(2),trim:d(3)}},"597a":function(t,e,n){},"7abe":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"home-container"},[n("van-nav-bar",{scopedSlots:t._u([{key:"title",fn:function(){return[n("van-button",{staticClass:"search-btn",attrs:{round:"",icon:"search",type:"info",to:"/search"}},[t._v("搜索")])]},proxy:!0}])}),n("van-tabs",{staticClass:"channel-tabs",attrs:{color:"#3296fa",swipeable:""},model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},[t._l(t.channels,(function(t){return n("van-tab",{key:t.id,attrs:{title:t.name}},[n("article-list",{attrs:{channel:t}})],1)})),n("div",{staticClass:"wap-nav-warp",attrs:{slot:"nav-right"},on:{click:function(e){t.isShowChannelEdit=!0}},slot:"nav-right"},[n("van-icon",{attrs:{name:"wap-nav"}})],1),n("div",{staticClass:"wap-nav-placeholder",attrs:{slot:"nav-right"},slot:"nav-right"})],2),n("van-popup",{staticClass:"channel-edit-popup",attrs:{position:"bottom",closeable:"",round:"","close-icon-position":"top-left",overlay:!1,"get-container":"body"},model:{value:t.isShowChannelEdit,callback:function(e){t.isShowChannelEdit=e},expression:"isShowChannelEdit"}},[n("channel-edit",{attrs:{"user-channels":t.channels,active:t.active},on:{close:function(e){t.isShowChannelEdit=!1},"switch-channel":function(e){t.active=e}}})],1)],1)},r=[],i=n("5530"),c=n("1da1"),s=(n("96cf"),n("c24f")),o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"article-list",staticClass:"article-list-container"},[n("van-pull-refresh",{attrs:{"success-text":t.refreshText,"success-duration":1e3},on:{refresh:t.onRefresh},model:{value:t.isPullDownLoading,callback:function(e){t.isPullDownLoading=e},expression:"isPullDownLoading"}},[n("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多了"},on:{load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.articles,(function(t){return n("article-item",{key:t.art_id.toString(),attrs:{article:t}})})),1)],1)],1)},l=[],u=n("2909"),d=(n("99af"),n("2423")),f=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"article-item-container"},[n("van-cell",{staticClass:"article-item",attrs:{to:{name:"article",params:{articleId:t.article.art_id}}}},[n("div",{attrs:{slot:"title"},slot:"title"},[n("div",{staticClass:"title van-multi-ellipsis--l2"},[t._v(t._s(t.article.title))])]),n("div",{attrs:{slot:"label"},slot:"label"},[3===t.article.cover.type?n("div",{staticClass:"cover-warp"},t._l(t.article.cover.images,(function(e){return n("div",{key:e.id,staticClass:"cover-warp-item"},[n("van-image",{staticClass:"cover-item",attrs:{fit:"cover",src:e},scopedSlots:t._u([{key:"loading",fn:function(){return[n("van-loading",{attrs:{type:"spinner",size:"20"}})]},proxy:!0},{key:"error",fn:function(){return[t._v("加载失败")]},proxy:!0}],null,!0)})],1)})),0):t._e(),n("div",{staticClass:"label-warp"},[n("span",[t._v(t._s(t.article.aut_name))]),n("span",[t._v(t._s(t.article.comm_count)+"评论")]),n("span",[t._v(t._s(t._f("relativeTime")(t.article.pubdate)))]),n("span",{staticClass:"close-item-btn"},[n("van-icon",{attrs:{name:"ellipsis"}})],1)])]),1===t.article.cover.type?n("div",{attrs:{slot:"default"},slot:"default"},[n("van-image",{staticClass:"cover-one",attrs:{fit:"cover",src:t.article.cover.images[0]},scopedSlots:t._u([{key:"loading",fn:function(){return[n("van-loading",{attrs:{type:"spinner",size:"20"}})]},proxy:!0},{key:"error",fn:function(){return[t._v("加载失败")]},proxy:!0}],null,!1,3034482977)})],1):t._e()])],1)},h=[],p={name:"ArticleItem",props:{article:{type:Object,required:!0}},data:function(){return{}}},v=p,b=(n("20a0"),n("2877")),m=Object(b["a"])(v,f,h,!1,null,"5661f892",null),g=m.exports,_=n("2ef0"),C={name:"ArticleList",props:{channel:{type:Object,required:!0}},data:function(){return{articles:[],loading:!1,finished:!1,timestamp:null,isPullDownLoading:!1,refreshText:"",scrollTop:0}},methods:{onLoad:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){var n,a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(d["f"])({channel_id:t.channel.id,timestamp:t.timestamp||1556789000001,with_top:1});case 2:n=e.sent,a=n.data,r=a.data.results,t.articles=[].concat(Object(u["a"])(t.articles),Object(u["a"])(r)),t.loading=!1,0!==r.length?t.timestamp=a.data.pre_timestamp:t.finished=!0;case 8:case"end":return e.stop()}}),e)})))()},onRefresh:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){var n,a,r,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(d["f"])({channel_id:t.channel.id,timestamp:Date.now(),with_top:1});case 2:a=e.sent,r=a.data,i=r.data.results,(n=t.articles).unshift.apply(n,Object(u["a"])(i)),0===i.length?t.refreshText="没有更多数据了":t.refreshText="更新了".concat(i.length,"条数据"),t.isPullDownLoading=!1;case 8:case"end":return e.stop()}}),e)})))()}},components:{ArticleItem:g},mounted:function(){var t=this,e=this.$refs["article-list"];e.onscroll=Object(_["debounce"])((function(){t.scrollTop=e.scrollTop}),50)},activated:function(){this.$refs["article-list"].scrollTop=this.scrollTop}},w=C,E=(n("af83"),Object(b["a"])(w,o,l,!1,null,"5f79cac2",null)),O=E.exports,x=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"channel-edit-container"},[n("van-cell",{attrs:{center:"",border:!1}},[n("div",{staticClass:"channel-title",attrs:{slot:"title"},slot:"title"},[t._v(" 我的频道"),n("span",[t._v(t._s(t.isEdit?"点击移除频道":"点击进入频道"))])]),n("van-button",{staticClass:"edit-btn",attrs:{type:"danger",plain:"",round:"",size:"mini"},on:{click:function(e){t.isEdit=!t.isEdit}}},[t._v(t._s(t.isEdit?"完成":"编辑"))])],1),n("van-grid",{attrs:{gutter:10}},t._l(t.userChannels,(function(e,a){return n("van-grid-item",{key:e.id,staticClass:"grid-item van-ellipsis",class:{active:t.active===a},attrs:{icon:t.isEdit&&0!==a?"close":"",text:e.name},on:{click:function(n){return t.onUserChannelClick(a,e)}}})})),1),n("van-cell",{attrs:{center:"",border:!1}},[n("div",{staticClass:"channel-title",attrs:{slot:"title"},slot:"title"},[t._v("频道推荐"),n("span",[t._v("点击添加频道")])])]),t.recommandChannels.length>0?n("van-grid",{attrs:{gutter:10}},t._l(t.recommandChannels,(function(e){return n("van-grid-item",{key:e.id,staticClass:"grid-item van-ellipsis",attrs:{text:e.name},on:{click:function(n){return t.onAddChannel(e)}}})})),1):n("van-cell",{attrs:{center:"",border:!1}},[n("div",{staticClass:"channel-empty"},[t._v("暂无数据")])])],1)},j=[],k=(n("a9e3"),n("a434"),n("4de4"),n("d3b7"),n("7db0"),n("b775")),y=function(){return Object(k["a"])({method:"GET",url:"/app/v1_0/channels"})},T=function(t){return Object(k["a"])({method:"PATCH",url:"/app/v1_0/user/channels",data:t})},S=function(t){return Object(k["a"])({method:"DELETE",url:"/app/v1_0/user/channels/".concat(t)})},A=n("2f62"),I=n("5d2d"),N={name:"ChannelEdit",props:{userChannels:{type:Array,require:!0},active:{type:Number,require:!0}},data:function(){return{allChannels:[],isEdit:!1}},created:function(){this.loadAllChannels()},methods:{loadAllChannels:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,y();case 2:n=e.sent,a=n.data,t.allChannels=a.data.channels;case 5:case"end":return e.stop()}}),e)})))()},onUserChannelClick:function(t,e){this.isEdit&&t>0?this.onSubChannel(t,e):this.switchChannel(t)},onAddChannel:function(t){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!e.isEdit){n.next=8;break}if(e.userChannels.push(t),e.user){n.next=6;break}Object(I["b"])("user-channels",e.userChannels),n.next=8;break;case 6:return n.next=8,T({channels:[{id:t.id,seq:e.userChannels.length}]});case 8:case"end":return n.stop()}}),n)})))()},onSubChannel:function(t,e){var n=this;return Object(c["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(t<=n.active&&n.$emit("switch-channel",n.active-1),n.userChannels.splice(t,1),n.user){a.next=6;break}Object(I["b"])("user-channels",n.userChannels),a.next=8;break;case 6:return a.next=8,S(e.id);case 8:case"end":return a.stop()}}),a)})))()},switchChannel:function(t){this.$emit("close"),this.$emit("switch-channel",t)}},computed:Object(i["a"])(Object(i["a"])({},Object(A["b"])(["user"])),{},{recommandChannels:function(){var t=this;return this.allChannels.filter((function(e){return!t.userChannels.find((function(t){return t.id===e.id}))}))}})},R=N,P=(n("4822"),Object(b["a"])(R,x,j,!1,null,"43cbf37c",null)),L=P.exports,D={name:"HomeIndex",data:function(){return{active:0,channels:[],isShowChannelEdit:!1}},created:function(){this.loadChannels()},methods:{loadChannels:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){var n,a,r,i,c,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=[],t.user){e.next=14;break}if(a=Object(I["a"])("user-channels"),!a){e.next=7;break}n=a,e.next=12;break;case 7:return e.next=9,Object(s["d"])();case 9:r=e.sent,i=r.data,n=i.data.channels;case 12:e.next=19;break;case 14:return e.next=16,Object(s["d"])();case 16:c=e.sent,o=c.data,n=o.data.channels;case 19:t.channels=n;case 20:case"end":return e.stop()}}),e)})))()}},components:{ArticleList:O,ChannelEdit:L},computed:Object(i["a"])({},Object(A["b"])(["user"]))},G=D,$=(n("3c79"),Object(b["a"])(G,a,r,!1,null,"9a7cc44e",null));e["default"]=$.exports},"7db0":function(t,e,n){"use strict";var a=n("23e7"),r=n("b727").find,i=n("44d2"),c="find",s=!0;c in[]&&Array(1)[c]((function(){s=!1})),a({target:"Array",proto:!0,forced:s},{find:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),i(c)},"99af":function(t,e,n){"use strict";var a=n("23e7"),r=n("da84"),i=n("d039"),c=n("e8b5"),s=n("861d"),o=n("7b0b"),l=n("07fa"),u=n("8418"),d=n("65f0"),f=n("1dde"),h=n("b622"),p=n("2d00"),v=h("isConcatSpreadable"),b=9007199254740991,m="Maximum allowed index exceeded",g=r.TypeError,_=p>=51||!i((function(){var t=[];return t[v]=!1,t.concat()[0]!==t})),C=f("concat"),w=function(t){if(!s(t))return!1;var e=t[v];return void 0!==e?!!e:c(t)},E=!_||!C;a({target:"Array",proto:!0,forced:E},{concat:function(t){var e,n,a,r,i,c=o(this),s=d(c,0),f=0;for(e=-1,a=arguments.length;e<a;e++)if(i=-1===e?c:arguments[e],w(i)){if(r=l(i),f+r>b)throw g(m);for(n=0;n<r;n++,f++)n in i&&u(s,f,i[n])}else{if(f>=b)throw g(m);u(s,f++,i)}return s.length=f,s}})},a09a:function(t,e,n){},a9e3:function(t,e,n){"use strict";var a=n("83ab"),r=n("da84"),i=n("e330"),c=n("94ca"),s=n("6eeb"),o=n("1a2d"),l=n("7156"),u=n("3a9b"),d=n("d9b5"),f=n("c04e"),h=n("d039"),p=n("241c").f,v=n("06cf").f,b=n("9bf2").f,m=n("408a"),g=n("58a8").trim,_="Number",C=r[_],w=C.prototype,E=r.TypeError,O=i("".slice),x=i("".charCodeAt),j=function(t){var e=f(t,"number");return"bigint"==typeof e?e:k(e)},k=function(t){var e,n,a,r,i,c,s,o,l=f(t,"number");if(d(l))throw E("Cannot convert a Symbol value to a number");if("string"==typeof l&&l.length>2)if(l=g(l),e=x(l,0),43===e||45===e){if(n=x(l,2),88===n||120===n)return NaN}else if(48===e){switch(x(l,1)){case 66:case 98:a=2,r=49;break;case 79:case 111:a=8,r=55;break;default:return+l}for(i=O(l,2),c=i.length,s=0;s<c;s++)if(o=x(i,s),o<48||o>r)return NaN;return parseInt(i,a)}return+l};if(c(_,!C(" 0o1")||!C("0b1")||C("+0x1"))){for(var y,T=function(t){var e=arguments.length<1?0:C(j(t)),n=this;return u(w,n)&&h((function(){m(n)}))?l(Object(e),n,T):e},S=a?p(C):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),A=0;S.length>A;A++)o(C,y=S[A])&&!o(T,y)&&b(T,y,v(C,y));T.prototype=w,w.constructor=T,s(r,_,T)}},af83:function(t,e,n){"use strict";n("05ba")},c24f:function(t,e,n){"use strict";n.d(e,"f",(function(){return r})),n.d(e,"g",(function(){return i})),n.d(e,"c",(function(){return c})),n.d(e,"d",(function(){return s})),n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return l})),n.d(e,"e",(function(){return u})),n.d(e,"i",(function(){return d})),n.d(e,"h",(function(){return f}));var a=n("b775"),r=function(t){return Object(a["a"])({method:"POST",url:"/app/v1_0/authorizations",data:t})},i=function(t){return Object(a["a"])({method:"GET",url:"/app/v1_0/sms/codes/".concat(t)})},c=function(t){return Object(a["a"])({method:"GET",url:"/app/v1_0/user"})},s=function(){return Object(a["a"])({method:"GET",url:"/app/v1_0/user/channels"})},o=function(t){return Object(a["a"])({method:"POST",url:"/app/v1_0/user/followings",data:{target:t}})},l=function(t){return Object(a["a"])({method:"DElETE",url:"/app/v1_0/user/followings/".concat(t)})},u=function(){return Object(a["a"])({method:"GET",url:"/app/v1_0/user/profile"})},d=function(t){return Object(a["a"])({method:"PATCH",url:"/app/v1_0/user/profile",data:t})},f=function(t){return Object(a["a"])({method:"PATCH",url:"/app/v1_0/user/photo",data:t})}},e72d:function(t,e,n){}}]);
//# sourceMappingURL=chunk-c9ba445e.879386c4.js.map